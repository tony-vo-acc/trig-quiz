<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unit Circle Trig Quiz</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
  <style>
    /* General page styling */
    body {
      font-family: Arial, sans-serif;
      background-color: #f8fbfd;
      margin: 0;
      padding: 0;
    }

    /* Header container */
    .header {
      position: sticky;
      top: 0;
      background-color: #ffffff;
      /* white header */
      padding: 16px 0;
      text-align: center;
      border-bottom: 1px solid #ddd;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
      z-index: 1000;
    }

    /* Header title */
    .header h1 {
      font-size: 1.4rem;
      margin: 0;
      color: #333;
      font-weight: 600;
    }

    /* Score text */
    .header .score {
      font-size: 1rem;
      color: #666;
      margin-top: 6px;
    }

    /* Progress bar wrapper */
    .progress-bar {
      width: 90%;
      max-width: 500px;
      margin: 12px auto 0;
      height: 8px;
      background-color: #e0e0e0;
      border-radius: 5px;
      overflow: hidden;
    }

    /* Progress indicator */
    #progress {
      height: 100%;
      width: 0%;
      background-color: #4cafef;
      transition: width 0.3s ease;
    }

    /* Question styling */
    .question {
      text-align: center;
      font-size: 1.4rem;
      font-weight: normal;
      /* removed bold */
      margin: 20px 0 28px;
      color: #333;
    }

    /* LaTeX inside question */
    .question mjx-container {
      font-size: 1.3rem;
      margin: 0 6px;
    }

    /* Answer container */
    .answers {
      display: flex;
      flex-direction: column;
      gap: 18px;
      padding: 0 8px;
    }

    /* Answer buttons */
    .answers button {
      width: 95%;
      max-width: 500px;
      margin: 0 auto;
      padding: 18px;
      min-height: 65px;
      font-size: 1.3rem;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 14px;
      color: #333;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, box-shadow 0.2s, border-color 0.2s;
      cursor: pointer;
    }

    .answers button:hover:not(:disabled) {
      background-color: #f0f0f0;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    }
    
    /* --- NEW STYLES ADDED HERE --- */
    .answers button.correct {
        background-color: #d4edda;
        border-color: #c3e6cb;
        color: #155724;
    }

    .answers button.wrong {
        background-color: #f8d7da;
        border-color: #f5c6cb;
        color: #721c24;
    }
    /* --- END OF NEW STYLES --- */

    /* LaTeX inside answers */
    .answers mjx-container {
      font-size: 1.2rem;
    }

    /* Prevent bottom space */
    main {
      padding-bottom: 40px;
    }
  </style>
</head>

<body>

  <div class="quiz-container">
    <div class="header">
      <h1>Unit Circle Quiz</h1>
      <div class="score" id="score">Score: 0 / 0</div>
      <div class="progress-bar">
        <div id="progress"></div>
      </div>

    </div>
    <div class="question-area">
      <div class="question" id="question"></div>
    </div>
    <div class="answers" id="answers">
      <button></button>
      <button></button>
      <button></button>
      <button></button>
    </div>
  </div>

  <script>
    const angles = [
        { deg: 0, rad: "0" }, { deg: 30, rad: "\\frac{\\pi}{6}" }, { deg: 45, rad: "\\frac{\\pi}{4}" },
        { deg: 60, rad: "\\frac{\\pi}{3}" }, { deg: 90, rad: "\\frac{\\pi}{2}" }, { deg: 120, rad: "\\frac{2\\pi}{3}" },
        { deg: 135, rad: "\\frac{3\\pi}{4}" }, { deg: 150, rad: "\\frac{5\\pi}{6}" }, { deg: 180, rad: "\\pi" },
        { deg: 210, rad: "\\frac{7\\pi}{6}" }, { deg: 225, rad: "\\frac{5\\pi}{4}" }, { deg: 240, rad: "\\frac{4\\pi}{3}" },
        { deg: 270, rad: "\\frac{3\\pi}{2}" }, { deg: 300, rad: "\\frac{5\\pi}{3}" }, { deg: 315, rad: "\\frac{7\\pi}{4}" },
        { deg: 330, rad: "\\frac{11\\pi}{6}" }, { deg: 360, rad: "2\\pi" }
    ];

    const trigValues = {
      sin: {
        0: "0", 30: "\\frac{1}{2}", 45: "\\frac{\\sqrt{2}}{2}", 60: "\\frac{\\sqrt{3}}{2}", 90: "1",
        120: "\\frac{\\sqrt{3}}{2}", 135: "\\frac{\\sqrt{2}}{2}", 150: "\\frac{1}{2}", 180: "0",
        210: "-\\frac{1}{2}", 225: "-\\frac{\\sqrt{2}}{2}", 240: "-\\frac{\\sqrt{3}}{2}", 270: "-1",
        300: "-\\frac{\\sqrt{3}}{2}", 315: "-\\frac{\\sqrt{2}}{2}", 330: "-\\frac{1}{2}", 360: "0"
      },
      cos: {
        0: "1", 30: "\\frac{\\sqrt{3}}{2}", 45: "\\frac{\\sqrt{2}}{2}", 60: "\\frac{1}{2}", 90: "0",
        120: "-\\frac{1}{2}", 135: "-\\frac{\\sqrt{2}}{2}", 150: "-\\frac{\\sqrt{3}}{2}", 180: "-1",
        210: "-\\frac{\\sqrt{3}}{2}", 225: "-\\frac{\\sqrt{2}}{2}", 240: "-\\frac{1}{2}", 270: "0",
        300: "\\frac{1}{2}", 315: "\\frac{\\sqrt{2}}{2}", 330: "\\frac{\\sqrt{3}}{2}", 360: "1"
      },
      tan: {
        0: "0", 30: "\\frac{\\sqrt{3}}{3}", 45: "1", 60: "\\sqrt{3}", 90: "undefined",
        120: "-\\sqrt{3}", 135: "-1", 150: "-\\frac{\\sqrt{3}}{3}", 180: "0", 210: "\\frac{\\sqrt{3}}{3}",
        225: "1", 240: "\\sqrt{3}", 270: "undefined", 300: "-\\sqrt{3}", 315: "-1", 330: "-\\frac{\\sqrt{3}}{3}", 360: "0"
      }
    };

    angles.forEach(a => {
      trigValues.csc = trigValues.csc || {};
      trigValues.sec = trigValues.sec || {};
      trigValues.cot = trigValues.cot || {};
      let s = trigValues.sin[a.deg], c = trigValues.cos[a.deg], t = trigValues.tan[a.deg];
      trigValues.csc[a.deg] = (s === "0") ? "undefined" : recip(s);
      trigValues.sec[a.deg] = (c === "0") ? "undefined" : recip(c);
      trigValues.cot[a.deg] = (t === "0" || t === "undefined") ? ((t === "0") ? "undefined" : "0") : recip(t);
    });

    function recip(val) {
      const map = {
        "\\frac{\\sqrt{2}}{2}": "\\sqrt{2}", "-\\frac{\\sqrt{2}}{2}": "-\\sqrt{2}",
        "\\frac{\\sqrt{3}}{2}": "\\frac{2\\sqrt{3}}{3}", "-\\frac{\\sqrt{3}}{2}": "-\\frac{2\\sqrt{3}}{3}",
        "\\frac{1}{2}": "2", "-\\frac{1}{2}": "-2", "\\frac{\\sqrt{3}}{3}": "\\sqrt{3}", "-\\frac{\\sqrt{3}}{3}": "-\\sqrt{3}",
        "\\sqrt{3}": "\\frac{\\sqrt{3}}{3}", "-\\sqrt{3}": "-\\frac{\\sqrt{3}}{3}", "1": "1", "-1": "-1", "0": "undefined", "undefined": "0"
      };
      return map[val] || val;
    }

    const functions = ["sin", "cos", "tan", "csc", "sec", "cot"];
    let questions = [];
    functions.forEach(fn => {
      angles.forEach(a => {
        let correct = trigValues[fn][a.deg];
        let label = Math.random() < 0.5 ? `${fn}(${a.deg}^\\circ)` : `${fn}(${a.rad})`;
        let choices = makeChoices(correct);
        questions.push({ question: `What is \\(${label}\\)?`, answers: choices, correct: choices.indexOf(correct) });
      });
    });

    function makeChoices(correct) {
      const pool = ["0", "1", "-1", "\\frac{1}{2}", "-\\frac{1}{2}", "\\frac{\\sqrt{2}}{2}", "-\\frac{\\sqrt{2}}{2}",
        "\\frac{\\sqrt{3}}{2}", "-\\frac{\\sqrt{3}}{2}", "\\frac{\\sqrt{3}}{3}", "-\\frac{\\sqrt{3}}{3}",
        "\\sqrt{3}", "-\\sqrt{3}", "2", "-2", "\\sqrt{2}", "-\\sqrt{2}", "\\frac{2\\sqrt{3}}{3}", "-\\frac{2\\sqrt{3}}{3}", "undefined"];
      let choices = [correct];
      while (choices.length < 4) {
        let pick = pool[Math.floor(Math.random() * pool.length)];
        if (!choices.includes(pick)) choices.push(pick);
      }
      return shuffle(choices);
    }

    function shuffle(arr) { return arr.sort(() => Math.random() - 0.5); }

    let score = 0, total = 0;
    let current;

    function updateScore() {
      document.getElementById("score").innerText = `Score: ${score} / ${total}`;
      document.getElementById("progress").style.width = total > 0 ? `${(score / total) * 100}%` : "0%";
    }

    function nextQuestion() {
      current = questions[Math.floor(Math.random() * questions.length)];
      document.getElementById("question").innerHTML = current.question;

      const btns = document.querySelectorAll("#answers button");
      btns.forEach((b, i) => {
        b.innerHTML = `\\(${current.answers[i]}\\)`;
        b.className = "";
        b.disabled = false;
        b.onclick = () => {
          total++;
          if (i === current.correct) {
            score++;
            b.classList.add("correct");
          } else {
            b.classList.add("wrong");
            btns[current.correct].classList.add("correct");
          }
          updateScore();
          btns.forEach(btn => btn.disabled = true);
          // --- SHORTENED DELAY HERE ---
          setTimeout(nextQuestion, 750);
        };
      });

      MathJax.typesetPromise();
    }

    window.onload = () => {
      updateScore();
      nextQuestion();
    };
  </script>

</body>

</html>
